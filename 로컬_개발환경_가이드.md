# DSFlow 로컬 개발환경 가이드

Docker 메모리 부족 등의 이유로 로컬 환경에서 개발하고 테스트하는 방법을 안내합니다.

## 📋 사전 요구사항

### Backend (Spring Boot)
- **Java 17** 이상
- **Maven 3.6** 이상 (또는 IDE에서 내장 Maven 사용)

### Frontend (React + Vite)
- **Node.js 18** 이상
- **npm** 또는 **yarn**

## 🚀 로컬 실행 방법

### 1. Backend 실행

```bash
# 1. backend 디렉토리로 이동
cd backend

# 2. Maven 의존성 설치 및 컴파일
./mvnw clean compile

# 3. Spring Boot 애플리케이션 실행
./mvnw spring-boot:run

# 또는 IDE에서 DsflowApplication.java 실행
```

**Backend 접속 정보:**
- API 서버: http://localhost:8080/api
- H2 데이터베이스 콘솔: http://localhost:8080/api/h2-console
  - JDBC URL: `jdbc:h2:mem:dsflow`
  - Username: `sa`
  - Password: (비어둠)
- Swagger API 문서: http://localhost:8080/api/swagger-ui.html

### 2. Frontend 실행

```bash
# 1. frontend 디렉토리로 이동 (새 터미널 창)
cd frontend

# 2. npm 의존성 설치
npm install

# 3. 개발 서버 시작
npm run dev
```

**Frontend 접속:**
- 웹 애플리케이션: http://localhost:3000

## 📊 데이터베이스 설정

### 로컬 개발 (H2 인메모리)
- **장점**: 설치 불필요, 빠른 시작, 메모리 사용량 적음
- **단점**: 재시작 시 데이터 초기화
- **용도**: 개발, 테스트, 기능 확인

### 프로덕션 (PostgreSQL)
- Docker 환경에서만 사용
- 데이터 영속성 보장

## 🔧 개발 팁

### 1. 핫 리로드 설정

**Backend (Spring Boot DevTools)**
```xml
<!-- pom.xml에 추가 (이미 포함됨) -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <scope>runtime</scope>
    <optional>true</optional>
</dependency>
```

**Frontend (Vite)**
- 자동으로 핫 리로드 지원
- 파일 저장 시 자동 새로고침

### 2. API 테스트

**Swagger UI 사용:**
1. http://localhost:8080/api/swagger-ui.html 접속
2. 각 API 엔드포인트 테스트 가능
3. Request/Response 스키마 확인

**H2 Console로 데이터 확인:**
1. http://localhost:8080/api/h2-console 접속
2. 테이블 구조 및 데이터 직접 확인
3. SQL 쿼리 실행 가능

### 3. 코드 수정 시 주의사항

**Entity 변경 시:**
- H2는 `ddl-auto: create-drop`으로 설정됨
- 애플리케이션 재시작 시 스키마 자동 재생성

**새로운 의존성 추가 시:**
```bash
# Backend
./mvnw clean compile

# Frontend  
npm install
```

## 🌟 주요 기능 테스트

### 1. 코드 동기화 시스템
1. 웹 브라우저에서 http://localhost:3000 접속
2. 좌측 메뉴에서 "코드 동기화" 클릭
3. 새 API 등록:
   - API 이름: 테스트 코드
   - URL: https://jsonplaceholder.typicode.com/users
   - HTTP 메소드: GET
   - 응답 매핑: `id` → codeValue, `name` → codeName
4. "테스트" 버튼으로 API 호출 확인
5. "등록" 버튼으로 저장

### 2. 배치 작업 관리
1. "작업 목록" 메뉴에서 배치 작업 확인
2. "작업 등록" 메뉴에서 새 작업 생성
3. 파라미터 설정 및 조합 테스트

### 3. 실행 로그 확인
1. "실행 로그" 메뉴에서 작업 실행 결과 확인
2. H2 Console에서 데이터베이스 직접 조회

## 🔧 문제 해결

### 포트 충돌 시
```bash
# 8080 포트 사용 중인 프로세스 확인
lsof -i :8080

# 프로세스 종료
kill -9 <PID>

# 또는 다른 포트 사용
./mvnw spring-boot:run -Dspring-boot.run.arguments="--server.port=8081"
```

### Frontend 빌드 오류 시
```bash
# node_modules 재설치
rm -rf node_modules package-lock.json
npm install

# 캐시 클리어
npm run dev -- --force
```

### Backend 컴파일 오류 시
```bash
# Maven 캐시 클리어
./mvnw clean

# 의존성 다시 다운로드
./mvnw dependency:resolve

# 전체 재빌드
./mvnw clean compile
```

## 📁 디렉토리 구조

```
DSFlow/
├── backend/                    # Spring Boot 백엔드
│   ├── src/main/java/         # Java 소스코드
│   ├── src/main/resources/    # 설정 파일
│   └── pom.xml               # Maven 설정
├── frontend/                  # React 프론트엔드
│   ├── src/                  # React 소스코드
│   ├── package.json          # npm 설정
│   └── vite.config.ts        # Vite 설정
└── docker/                   # Docker 설정 (선택사항)
```

## 🚀 빠른 시작 명령어

```bash
# 전체 프로젝트 클론 및 실행
git clone <repository-url>
cd DSFlow

# Backend 시작 (터미널 1)
cd backend && ./mvnw spring-boot:run

# Frontend 시작 (터미널 2)  
cd frontend && npm install && npm run dev

# 브라우저에서 http://localhost:3000 접속
```

이제 Docker 없이도 완전한 DSFlow 시스템을 로컬에서 개발하고 테스트할 수 있습니다! 🎉 