# μ μ—°ν• λ‹¤μ¤‘ νλΌλ―Έν„° λ°°μΉ μ‘μ—… μ‹μ¤ν… κ°€μ΄λ“

## κ°μ”

μ΄ κ°€μ΄λ“λ” λ‹¤μ–‘ν• μΆ…λ¥μ νλΌλ―Έν„°λ“¤μ„ μ μ—°ν•κ² μ΅°ν•©ν•μ—¬ APIλ¥Ό νΈμ¶ν•λ” λ°°μΉ μ‘μ—… μ‹μ¤ν… μ‚¬μ©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤. μ§€μ—­μ½”λ“, λ‚ μ§λΏλ§ μ•„λ‹λΌ μ—…μΆ…μ½”λ“, μΉ΄ν…κ³ λ¦¬μ½”λ“, κΈ°κ΄€μ½”λ“ λ“± μ–΄λ–¤ μΆ…λ¥μ νλΌλ―Έν„°λ“  λ§¤νΈλ¦­μ¤ ν•νƒλ΅ μ΅°ν•©ν•μ—¬ λ€λ‰μ API νΈμ¶μ„ μλ™ν™”ν•  μ μμµλ‹λ‹¤.

## μ‹μ¤ν… νΉμ§•

### 1. μ μ—°ν• νλΌλ―Έν„° μ΅°ν•© μ§€μ›
- **SINGLE**: λ‹¨μΌ νλΌλ―Έν„° μ‘μ—…
- **MULTI_PARAM**: ν•λ‚μ νλΌλ―Έν„°μ— λ€ν•΄ μ—¬λ¬ κ°’λ“¤μ„ μμ°¨ μ²λ¦¬
- **MATRIX**: μ—¬λ¬ νλΌλ―Έν„°λ“¤μ μ΅°ν•©μ„ λ§¤νΈλ¦­μ¤ ν•νƒλ΅ μ²λ¦¬ (λ°μΉ΄λ¥΄νΈ κ³±)

### 2. λ‹¤μ–‘ν• κ°’ μ†μ¤ μ§€μ›
- **DB_QUERY**: λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ κ²°κ³Ό
- **STATIC_LIST**: μ •μ  κ°’ λ©λ΅ (JSON λ°°μ—΄)
- **DATE_RANGE**: λ‚ μ§ λ²”μ„ (μ‹μ‘μΌ, μΆ…λ£μΌ, κ°„κ²©)
- **API_CALL**: μ™Έλ¶€ API νΈμ¶ κ²°κ³Ό
- **FILE_LIST**: νμΌμ—μ„ μ½μ–΄μ¨ κ°’ λ©λ΅

### 3. API μ ν• λ€μ‘
- λ°°μΉ ν¬κΈ° μ΅°μ  (λ™μ‹ μ²λ¦¬ κ°μ μ ν•)
- API νΈμ¶ κ°„ μ§€μ—° μ‹κ°„ μ„¤μ •
- μ‹κ°„μ°¨ λ¶„μ‚° νΈμ¶

## μ‚¬μ© λ°©λ²•

### 1. Job μ •μ λ“±λ΅

#### λ¶€λ™μ‚° μ‹¤κ±°λκ°€ μμ§‘ Job λ“±λ΅ μμ‹
```json
{
  "jobCode": "REAL_ESTATE_APARTMENT_TRADE",
  "jobName": "μ•„ννΈ μ‹¤κ±°λκ°€ λ°μ΄ν„° μμ§‘",
  "description": "κµ­ν† κµν†µλ¶€ λ¶€λ™μ‚° μ‹¤κ±°λκ°€ κ³µκ³µ APIλ¥Ό ν†µν• μ•„ννΈ λ§¤λ§¤ μ‹¤κ±°λ μ •λ³΄ μμ§‘",
  "methodType": "API_GET",
  "resourceUrl": "http://openapi.molit.go.kr/OpenAPI_ToolInstallPackage/service/rest/RTMSOBJSvc/getRTMSDataSvcAptTradeDev",
  "parameters": "{\"serviceKey\":\"YOUR_SERVICE_KEY\",\"numOfRows\":\"1000\",\"pageNo\":\"1\"}",
  "cronExpression": "0 0 2 * * ?",
  "resourceWeight": 2,
  "parameterType": "MATRIX",
  "batchSize": 10,
  "delaySeconds": 1
}
```

### 2. νλΌλ―Έν„° μ„¤μ • λ“±λ΅

#### μ§€μ—­μ½”λ“ νλΌλ―Έν„° μ„¤μ • (DB μΏΌλ¦¬)
```json
{
  "parameterName": "LAWD_CD",
  "valueSourceType": "DB_QUERY",
  "valueSource": "CODE_CATEGORY:REGION",
  "description": "λ²•μ •λ™μ½”λ“ - μƒλ΅μ΄ μ μ—°ν• μ½”λ“ μ‹μ¤ν…μ—μ„ μ§€μ—­ μΉ΄ν…κ³ λ¦¬",
  "sortOrder": 1
}
```

#### κ³„μ•½μ—°μ›” νλΌλ―Έν„° μ„¤μ • (λ‚ μ§ λ²”μ„)
```json
{
  "parameterName": "DEAL_YMD",
  "valueSourceType": "DATE_RANGE",
  "valueSource": "{\"startDate\":\"2024-01-01\",\"endDate\":\"2024-06-01\",\"format\":\"yyyyMM\",\"interval\":\"MONTH\"}",
  "description": "κ³„μ•½μ—°μ›” - μµκ·Ό 6κ°μ›”",
  "sortOrder": 2
}
```

#### μ—…μΆ…μ½”λ“ νλΌλ―Έν„° μ„¤μ • (μ •μ  λ©λ΅)
```json
{
  "parameterName": "INDUSTRY_CD",
  "valueSourceType": "STATIC_LIST",
  "valueSource": "[\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\"]",
  "description": "ν•κµ­ν‘μ¤€μ‚°μ—…λ¶„λ¥ λ€λ¶„λ¥ μ½”λ“",
  "sortOrder": 1
}
```

#### μ™Έλ¶€ API νΈμ¶λ΅ νλΌλ―Έν„° κ°’ κ°€μ Έμ¤κΈ°
```json
{
  "parameterName": "CATEGORY_CD",
  "valueSourceType": "API_CALL",
  "valueSource": "{\"url\":\"https://api.example.com/categories\",\"method\":\"GET\",\"jsonPath\":\"data.categories[].code\"}",
  "description": "μ™Έλ¶€ APIμ—μ„ κ°€μ Έμ¨ μΉ΄ν…κ³ λ¦¬ μ½”λ“",
  "sortOrder": 3
}
```

### 3. νλΌλ―Έν„° νƒ€μ…λ³„ λ™μ‘ λ°©μ‹

#### SINGLE νƒ€μ…
- κΈ°λ³Έ νλΌλ―Έν„°λ§ μ‚¬μ©ν•μ—¬ 1ν API νΈμ¶
- νλΌλ―Έν„° μ„¤μ • λ¶ν•„μ”

#### MULTI_PARAM νƒ€μ…
- μ²« λ²μ§Έ νλΌλ―Έν„°μ μ—¬λ¬ κ°’λ“¤μ— λ€ν•΄ μμ°¨μ μΌλ΅ API νΈμ¶
- μ: μ—…μΆ…μ½”λ“ A, B, C, D... κ°κ°μ— λ€ν•΄ API νΈμ¶

#### MATRIX νƒ€μ…
- λ¨λ“  νλΌλ―Έν„°λ“¤μ λ°μΉ΄λ¥΄νΈ κ³±μΌλ΅ API νΈμ¶
- μ: μ§€μ—­μ½”λ“(100κ°) Γ— κ³„μ•½μ—°μ›”(6κ°) = 600κ° API νΈμ¶

### 4. REST API μ‚¬μ©λ²•

#### Job μ‹¤ν–‰
```bash
curl -X POST "http://localhost:8080/api/jobs/execute" \
  -H "Content-Type: application/json" \
  -d "{\"jobCode\": \"REAL_ESTATE_APARTMENT_TRADE\"}"
```

#### νλΌλ―Έν„° μ„¤μ • μ΅°ν
```bash
curl -X GET "http://localhost:8080/api/job-parameter-configs?jobDefinitionId=1"
```

## μ‹¤μ  μ‚¬μ© μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: μ „κµ­ λ¶€λ™μ‚° μ‹¤κ±°λκ°€ μμ§‘

**μ„¤μ •**:
- parameterType: `MATRIX`
- μ§€μ—­μ½”λ“: `CODE_CATEGORY:REGION` (μƒλ΅μ΄ μ½”λ“ μ‹μ¤ν…μ—μ„ 15κ° μ§€μ—­)
- κ³„μ•½μ—°μ›”: μµκ·Ό 12κ°μ›”
- batchSize: `20`
- delaySeconds: `1`

**κ²°κ³Ό**: 15κ° μ§€μ—­ Γ— 12κ°μ›” = 180κ° API νΈμ¶
**μ†μ”μ‹κ°„**: (180 Γ· 20) Γ— 1μ΄ = 9μ΄

### μ‹λ‚λ¦¬μ¤ 2: μ—…μΆ…λ³„ μ‚¬μ—…μ²΄ ν†µκ³„ μμ§‘

**μ„¤μ •**:
- parameterType: `MULTI_PARAM`
- μ—…μΆ…μ½”λ“: `CODE_CATEGORY:INDUSTRY` (μƒλ΅μ΄ μ½”λ“ μ‹μ¤ν…μ—μ„ 10κ° μ—…μΆ…)
- batchSize: `5`
- delaySeconds: `2`

**κ²°κ³Ό**: 10κ° μ—…μΆ…μ½”λ“μ— λ€ν•΄ μμ°¨ API νΈμ¶
**μ†μ”μ‹κ°„**: (10 Γ· 5) Γ— 2μ΄ = 4μ΄

### μ‹λ‚λ¦¬μ¤ 3: λ‹¤μ°¨μ› ν†µκ³„ λ°μ΄ν„° μμ§‘

**μ„¤μ •**:
- parameterType: `MATRIX`
- μ§€μ—­μ½”λ“: `CODE_CATEGORY:REGION` (15κ° μ§€μ—­)
- μ—…μΆ…μ½”λ“: `CODE_CATEGORY:INDUSTRY` (10κ° μ—…μΆ…)
- μ‚¬μ—…μ²΄μ ν•: `CODE_CATEGORY:BUSINESS_TYPE` (4κ° μ ν•)
- batchSize: `10`
- delaySeconds: `1`

**κ²°κ³Ό**: 15 Γ— 10 Γ— 4 = 600κ° API νΈμ¶
**μ†μ”μ‹κ°„**: (600 Γ· 10) Γ— 1μ΄ = 60μ΄

## κ°’ μ†μ¤ νƒ€μ…λ³„ μƒμ„Έ μ„¤μ •

### DB_QUERY
```sql
-- π†• μƒλ΅μ΄ μ μ—°ν• μ½”λ“ μ‹μ¤ν… (κ¶μ¥)
CODE_CATEGORY:REGION         -- μ§€μ—­μ½”λ“
CODE_CATEGORY:INDUSTRY       -- μ—…μΆ…μ½”λ“  
CODE_CATEGORY:BUSINESS_TYPE  -- μ‚¬μ—…μ²΄μ ν•
CODE_CATEGORY:VEHICLE_TYPE   -- μ°¨λ‰μ ν•

-- π”§ Legacy SQL μΏΌλ¦¬ (ν•μ„ νΈν™μ„±)
SELECT code_value FROM code_values cv 
JOIN code_categories cc ON cv.category_id = cc.id 
WHERE cc.category_code = 'REGION' AND cv.is_active = true

-- μ»¤μ¤ν…€ ν…μ΄λΈ” μΏΌλ¦¬
SELECT org_code FROM custom_organization_codes WHERE created_at >= NOW() - INTERVAL '1 year'
```

### STATIC_LIST
```json
// ν•κµ­ν‘μ¤€μ‚°μ—…λ¶„λ¥ λ€λ¶„λ¥
["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U"]

// μ›”λ³„ μ½”λ“
["202401", "202402", "202403", "202404", "202405", "202406"]

// μ‚¬μ—…μ²΄ κ·λ¨ μ½”λ“
["1", "2", "3", "4", "5"]
```

### DATE_RANGE
```json
// μ›”λ³„ λ²”μ„ (yyyyMM ν•μ‹)
{
  "startDate": "2024-01-01",
  "endDate": "2024-12-01", 
  "format": "yyyyMM",
  "interval": "MONTH"
}

// μΌλ³„ λ²”μ„ (yyyyMMdd ν•μ‹)
{
  "startDate": "2024-01-01",
  "endDate": "2024-01-31",
  "format": "yyyyMMdd", 
  "interval": "DAY"
}

// λ¶„κΈ°λ³„ λ²”μ„ (yyyy0Q ν•μ‹)
{
  "startDate": "2024-01-01",
  "endDate": "2024-12-01",
  "format": "yyyy'Q'Q",
  "interval": "QUARTER"
}
```

### API_CALL
```json
// μ™Έλ¶€ APIμ—μ„ μ½”λ“ λ©λ΅ κ°€μ Έμ¤κΈ°
{
  "url": "https://api.example.com/codes",
  "method": "GET",
  "jsonPath": "data.codes[]"
}

// μΈμ¦μ΄ ν•„μ”ν• API
{
  "url": "https://api.example.com/categories",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer YOUR_TOKEN"
  },
  "jsonPath": "result.categories[].id"
}
```

## μµμ ν™” ν

### 1. λ°°μΉ ν¬κΈ° μ΅°μ 
- API μ ν•μ΄ μ—„κ²©ν• κ²½μ°: batchSize `1-5`
- μΌλ°μ μΈ κ³µκ³µλ°μ΄ν„° API: batchSize `10-20`
- λ‚΄λ¶€ APIλ‚ μ ν•μ΄ μ—†λ” κ²½μ°: batchSize `50-100`

### 2. μ§€μ—° μ‹κ°„ μ„¤μ •
- κ³µκ³µλ°μ΄ν„° API: `1-2μ΄`
- μƒμ© API μ„λΉ„μ¤: `0.5-1μ΄`
- λ‚΄λ¶€ API: `0-0.5μ΄`

### 3. μ¤μΌ€μ¤„λ§ μ „λµ
```bash
# λ€μ©λ‰ λ°μ΄ν„° μμ§‘: μƒλ²½ μ‹κ°„λ€
"0 0 2 * * ?" # λ§¤μΌ μƒλ²½ 2μ‹

# μ¤‘κ°„ κ·λ¨: μ΄λ¥Έ μ•„μΉ¨
"0 0 6 * * ?" # λ§¤μΌ μ•„μΉ¨ 6μ‹

# μ†κ·λ¨: μ£ΌκΈ°μ  μμ§‘
"0 */30 * * * ?" # 30λ¶„λ§λ‹¤
```

### 4. λ§¤νΈλ¦­μ¤ μ΅°ν•© μµμ ν™”
- νλΌλ―Έν„° μμ„λ¥Ό λ³€κ²½ λΉλ„ μμΌλ΅ μ •λ ¬
- κ°€μ¥ μμ£Ό λ³€ν•λ” νλΌλ―Έν„°λ¥Ό λ§μ§€λ§‰μ— λ°°μΉ
- μ΄ μ΅°ν•© μκ°€ λ„λ¬΄ λ§μΌλ©΄ νλΌλ―Έν„°λ¥Ό λ¶„ν• ν•μ—¬ μ—¬λ¬ JobμΌλ΅ λ‚λ”

## μ—λ¬ μ²λ¦¬ λ° λ¨λ‹ν„°λ§

### 1. κ°’ μ†μ¤ μ¤λ¥
- DB_QUERY: μΏΌλ¦¬ λ¬Έλ²• μ¤λ¥, κ¶ν• λ¶€μ΅±
- API_CALL: λ„¤νΈμ›ν¬ μ¤λ¥, μΈμ¦ μ‹¤ν¨
- STATIC_LIST: JSON ν•μ‹ μ¤λ¥

### 2. API νΈμ¶ μ¤λ¥
- κ°λ³„ νλΌλ―Έν„° μ΅°ν•© μ‹¤ν¨ μ‹ λ‹¤μ μ΅°ν•© κ³„μ† μ²λ¦¬
- μ „μ²΄ Job μ‹¤ν–‰ κ²°κ³Όμ— μ„±κ³µ/μ‹¤ν¨ κ±΄μ κΈ°λ΅
- μ‹¤ν¨μ¨μ΄ μ„κ³„μΉλ¥Ό μ΄κ³Όν•λ©΄ Job μ¤‘λ‹¨

### 3. μ„±λ¥ λ¨λ‹ν„°λ§
- νλΌλ―Έν„° μ΅°ν•© μƒμ„± μ‹κ°„
- API νΈμ¶ μ‘λ‹µ μ‹κ°„
- λ°°μΉ μ²λ¦¬ μ²λ¦¬λ‰ (TPS)

μ΄ μ‹μ¤ν…μ„ ν†µν•΄ μ–΄λ–¤ μΆ…λ¥μ κ³µκ³µλ°μ΄ν„°λ‚ APIλ“  λ‹¤μ¤‘ νλΌλ―Έν„°λ¥Ό μ΅°ν•©ν•μ—¬ λ€λ‰μ λ°μ΄ν„°λ¥Ό ν¨μ¨μ μΌλ΅ μμ§‘κ°€λ¥ν•κ²ν•¨